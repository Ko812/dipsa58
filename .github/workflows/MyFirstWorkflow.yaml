name: My First Workflow

# trigger
on:
  push:
    branches:
      - 'release/v[0-9]+.[0-9]+'

jobs:
  # name of your job
  my-first-job:
    # runner
    runs-on: ubuntu-latest
    permissions: write-all
    # steps in this job
    steps:
      # - name: Run Trivy vulnerability scanner in fs mode
        # uses: aquasecurity/trivy-action@master
        # with:
          # scan-type: 'repo'
          # ignore-unfixed: true
          # format: 'github'
          # github-pat: ${{secrets.GH_TOKEN}}
          # output: 'dependency-results.sbom.json'
          # severity: 'LOW'
      # - name: Upload trivy report as a Github artifact
        # uses: actions/upload-artifact@v4
        # with:
          # name: trivy-sbom-report
          # path: '${{ github.workspace }}/dependency-results.sbom.json'
          # retention-days: 2 # 90 is the default
      # - name: Download artifact
        # uses: actions/download-artifact@v4
        # with:
          # name: trivy-sbom-report
      # - name: echo the git branch
        # uses: mscoutermarsh/cowsays-action@master
        # with:
          # text: "I am on branch ${{github.workspace}}"
          # color: cyan
      - name: Send custom JSON data to Slack workflow
        id: slack
        uses: slackapi/slack-github-action@v1.26.0
        with:
          # This data can be any valid JSON from a previous step in the GitHub Action
          payload: |
            {
              "text": "https://github.com/ko812",
              "blocks": [
                {
                  "type": "section",
                  "text": {
                    "type": "mrkdwn",
                    "text": "GitHub Action build result"
                  }
                }
              ]
            }
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.testSubmission }}
